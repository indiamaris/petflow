{"ast":null,"code":"var _jsxFileName = \"/Users/indiamaris/CODE/petflow/src/components/FlowCanvas.js\",\n  _s = $RefreshSig$();\nimport { addEdge, Background, Controls, MiniMap, ReactFlow, ReactFlowProvider, useReactFlow } from '@xyflow/react';\nimport '@xyflow/react/dist/style.css';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { FLOW_CONFIG } from '../config/flow-config';\nimport { saveAnimalData } from '../utils/storage-utils';\nimport AnimalDetailsPanel from './AnimalDetailsPanel';\nimport ContextMenu from './ContextMenu';\nimport CustomNode from './CustomNode';\nimport './FlowCanvas.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst nodeTypes = {\n  custom: CustomNode\n};\n\n// Componente interno que usa useReactFlow\nfunction FlowCanvasInner({\n  nodes: initialNodes,\n  edges: initialEdges,\n  onUpdate,\n  onMatilhaClick,\n  onAnimalUpdate,\n  canvasId,\n  highlightedNodes\n}) {\n  _s();\n  // Debug: verificar se highlightedNodes está sendo passado\n  console.log('FlowCanvasInner - highlightedNodes:', highlightedNodes);\n  console.log('FlowCanvasInner - typeof highlightedNodes:', typeof highlightedNodes);\n  const [nodes, setNodes] = useState(initialNodes);\n  const [edges, setEdges] = useState(initialEdges);\n  const [selectedAnimal, setSelectedAnimal] = useState(null);\n  const [isDetailsPanelOpen, setIsDetailsPanelOpen] = useState(false);\n  const [contextMenu, setContextMenu] = useState({\n    show: false,\n    position: null,\n    sourceNode: null\n  });\n  const reactFlowWrapper = useRef(null);\n  const reactFlowInstance = useReactFlow();\n  const onNodesChange = useCallback(changes => {\n    setNodes(nds => {\n      let updatedNodes = [...nds];\n      changes.forEach(change => {\n        if (change.type === 'position') {\n          updatedNodes = updatedNodes.map(node => node.id === change.id ? {\n            ...node,\n            position: change.position\n          } : node);\n        } else if (change.type === 'remove') {\n          updatedNodes = updatedNodes.filter(node => node.id !== change.id);\n        } else if (change.type === 'add') {\n          updatedNodes = [...updatedNodes, change.item];\n        }\n      });\n      return updatedNodes;\n    });\n  }, []);\n  const onEdgesChange = useCallback(changes => {\n    setEdges(eds => {\n      let updatedEdges = [...eds];\n      changes.forEach(change => {\n        if (change.type === 'remove') {\n          updatedEdges = updatedEdges.filter(edge => edge.id !== change.id);\n        } else if (change.type === 'add') {\n          updatedEdges = [...updatedEdges, change.item];\n        }\n      });\n      return updatedEdges;\n    });\n  }, []);\n  const onConnect = useCallback(params => {\n    setEdges(eds => addEdge(params, eds));\n  }, []);\n  const onNodeClick = useCallback((event, node) => {\n    console.log('Node clicked:', node);\n    if (node.data.type === 'matilha') {\n      onMatilhaClick(node.id);\n    } else if (node.data.type === 'animal') {\n      setSelectedAnimal(node);\n      setIsDetailsPanelOpen(true);\n    }\n  }, [onMatilhaClick]);\n  const onNodeContextMenu = useCallback((event, node) => {\n    event.preventDefault();\n    setContextMenu({\n      show: true,\n      position: {\n        x: event.clientX,\n        y: event.clientY\n      },\n      sourceNode: node\n    });\n  }, []);\n  const onPaneContextMenu = useCallback(event => {\n    event.preventDefault();\n    setContextMenu({\n      show: true,\n      position: {\n        x: event.clientX,\n        y: event.clientY\n      },\n      sourceNode: null\n    });\n  }, []);\n\n  // Removido useEffect que causava loop infinito\n  // onUpdate é chamado manualmente quando necessário\n\n  // Sincronizar com as mudanças externas apenas na primeira renderização\n  useEffect(() => {\n    setNodes(initialNodes);\n    setEdges(initialEdges);\n  }, []); // Array vazio para executar apenas uma vez\n\n  const handleSaveAnimal = useCallback((animalId, animalData) => {\n    // Atualizar o estado local dos nós imediatamente\n    setNodes(prevNodes => prevNodes.map(node => node.id === animalId ? {\n      ...node,\n      data: {\n        ...node.data,\n        ...animalData,\n        // Atualizar o animalName para refletir no canvas\n        animalName: animalData.nome || node.data.animalName\n      }\n    } : node));\n\n    // Atualizar o estado global\n    if (onAnimalUpdate) {\n      onAnimalUpdate(animalId, animalData);\n    }\n\n    // Fechar o painel\n    setIsDetailsPanelOpen(false);\n    setSelectedAnimal(null);\n  }, [onAnimalUpdate]);\n  const handleCloseDetailsPanel = useCallback(() => {\n    setIsDetailsPanelOpen(false);\n    setSelectedAnimal(null);\n  }, []);\n  const handleCloseContextMenu = useCallback(() => {\n    setContextMenu({\n      show: false,\n      position: null,\n      sourceNode: null\n    });\n  }, []);\n  const handleDeleteNode = useCallback(nodeId => {\n    // Remover o nó do estado local\n    setNodes(prevNodes => prevNodes.filter(node => node.id !== nodeId));\n\n    // Remover todas as edges conectadas a este nó\n    setEdges(prevEdges => prevEdges.filter(edge => edge.source !== nodeId && edge.target !== nodeId));\n\n    // Atualizar o estado global\n    if (onUpdate) {\n      const updatedNodes = nodes.filter(node => node.id !== nodeId);\n      const updatedEdges = edges.filter(edge => edge.source !== nodeId && edge.target !== nodeId);\n      onUpdate(updatedNodes, updatedEdges);\n    }\n\n    // Fechar painel de detalhes se o nó deletado era o selecionado\n    if (selectedAnimal && selectedAnimal.id === nodeId) {\n      setIsDetailsPanelOpen(false);\n      setSelectedAnimal(null);\n    }\n  }, [nodes, edges, onUpdate, selectedAnimal]);\n  const handleSaveSVG = useCallback(() => {\n    if (reactFlowInstance) {\n      try {\n        // Obter todos os nós para calcular bounds\n        const allNodes = reactFlowInstance.getNodes();\n        if (allNodes.length === 0) {\n          alert('Não há nós para exportar.');\n          return;\n        }\n\n        // Calcular bounds dos nós\n        const bounds = allNodes.reduce((bounds, node) => {\n          const nodeWidth = node.data.type === 'granja' ? 120 : 100;\n          const nodeHeight = node.data.type === 'granja' ? 80 : 60;\n          bounds.minX = Math.min(bounds.minX, node.position.x);\n          bounds.maxX = Math.max(bounds.maxX, node.position.x + nodeWidth);\n          bounds.minY = Math.min(bounds.minY, node.position.y);\n          bounds.maxY = Math.max(bounds.maxY, node.position.y + nodeHeight);\n          return bounds;\n        }, {\n          minX: allNodes[0].position.x,\n          maxX: allNodes[0].position.x,\n          minY: allNodes[0].position.y,\n          maxY: allNodes[0].position.y\n        });\n\n        // Adicionar padding\n        const padding = 100;\n        const width = bounds.maxX - bounds.minX + padding * 2;\n        const height = bounds.maxY - bounds.minY + padding * 2;\n\n        // Criar um novo SVG\n        const newSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        newSvg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n        newSvg.setAttribute('viewBox', `${bounds.minX - padding} ${bounds.minY - padding} ${width} ${height}`);\n        newSvg.setAttribute('width', width);\n        newSvg.setAttribute('height', height);\n        newSvg.setAttribute('style', 'background-color: #f8f9fa;');\n\n        // Adicionar background\n        const background = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n        background.setAttribute('width', '100%');\n        background.setAttribute('height', '100%');\n        background.setAttribute('fill', '#f8f9fa');\n        newSvg.appendChild(background);\n\n        // Adicionar nós como retângulos representativos\n        allNodes.forEach(node => {\n          const nodeElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n          const nodeWidth = node.data.type === 'matilha' ? 120 : 100;\n          const nodeHeight = node.data.type === 'matilha' ? 80 : 60;\n          nodeElement.setAttribute('x', node.position.x);\n          nodeElement.setAttribute('y', node.position.y);\n          nodeElement.setAttribute('width', nodeWidth);\n          nodeElement.setAttribute('height', nodeHeight);\n          nodeElement.setAttribute('fill', node.data.color || '#666');\n          nodeElement.setAttribute('stroke', '#333');\n          nodeElement.setAttribute('stroke-width', '2');\n          nodeElement.setAttribute('rx', '8');\n\n          // Adicionar texto do nó\n          const textElement = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n          textElement.setAttribute('x', node.position.x + nodeWidth / 2);\n          textElement.setAttribute('y', node.position.y + nodeHeight / 2 + 5);\n          textElement.setAttribute('text-anchor', 'middle');\n          textElement.setAttribute('fill', 'white');\n          textElement.setAttribute('font-size', '12');\n          textElement.setAttribute('font-weight', 'bold');\n          textElement.textContent = node.data.animalName || node.data.label;\n          newSvg.appendChild(nodeElement);\n          newSvg.appendChild(textElement);\n        });\n\n        // Adicionar conexões\n        const allEdges = reactFlowInstance.getEdges();\n        allEdges.forEach(edge => {\n          const sourceNode = allNodes.find(n => n.id === edge.source);\n          const targetNode = allNodes.find(n => n.id === edge.target);\n          if (sourceNode && targetNode) {\n            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n            const sourceX = sourceNode.position.x + (sourceNode.data.type === 'matilha' ? 60 : 50);\n            const sourceY = sourceNode.position.y + (sourceNode.data.type === 'matilha' ? 60 : 30);\n            const targetX = targetNode.position.x + (targetNode.data.type === 'matilha' ? 60 : 50);\n            const targetY = targetNode.position.y + (targetNode.data.type === 'matilha' ? 60 : 30);\n            line.setAttribute('x1', sourceX);\n            line.setAttribute('y1', sourceY);\n            line.setAttribute('x2', targetX);\n            line.setAttribute('y2', targetY);\n            line.setAttribute('stroke', '#666');\n            line.setAttribute('stroke-width', '2');\n            line.setAttribute('marker-end', 'url(#arrowhead)');\n            newSvg.appendChild(line);\n          }\n        });\n\n        // Adicionar definição de seta\n        const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\n        const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');\n        marker.setAttribute('id', 'arrowhead');\n        marker.setAttribute('markerWidth', '10');\n        marker.setAttribute('markerHeight', '7');\n        marker.setAttribute('refX', '9');\n        marker.setAttribute('refY', '3.5');\n        marker.setAttribute('orient', 'auto');\n        const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n        polygon.setAttribute('points', '0 0, 10 3.5, 0 7');\n        polygon.setAttribute('fill', '#666');\n        marker.appendChild(polygon);\n        defs.appendChild(marker);\n        newSvg.appendChild(defs);\n\n        // Converter para string SVG\n        const svgData = new XMLSerializer().serializeToString(newSvg);\n        const svgBlob = new Blob([svgData], {\n          type: 'image/svg+xml;charset=utf-8'\n        });\n\n        // Criar link de download\n        const url = URL.createObjectURL(svgBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `petflow_canvas_${canvasId}_${new Date().toISOString().split('T')[0]}.svg`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n        alert('Canvas salvo como SVG com sucesso!');\n      } catch (error) {\n        console.error('Erro ao salvar SVG:', error);\n        alert('Erro ao salvar SVG. Tente novamente.');\n      }\n    }\n  }, [reactFlowInstance, canvasId]);\n\n  // Expor função de salvar SVG globalmente\n  useEffect(() => {\n    window.saveCanvasAsSVG = handleSaveSVG;\n    return () => {\n      delete window.saveCanvasAsSVG;\n    };\n  }, [handleSaveSVG]);\n  const handleCreateArtifact = useCallback((artifactType, position) => {\n    const newNodeId = `${artifactType.id}-${Date.now()}`;\n\n    // Gerar nome único para cachorros\n    let animalName = artifactType.label;\n    if (artifactType.type === 'animal') {\n      const randomIndex = Math.floor(Math.random() * 24);\n      const names = ['Buddy', 'Max', 'Luna', 'Rocky', 'Bella', 'Charlie', 'Lucy', 'Cooper', 'Daisy', 'Bear', 'Molly', 'Duke', 'Sophie', 'Jack', 'Ruby', 'Oliver', 'Chloe', 'Tucker', 'Penny', 'Winston', 'Lola', 'Murphy', 'Zoe', 'Finn'];\n      animalName = names[randomIndex];\n    }\n\n    // Calcular posição do novo nó baseada no nó de origem\n    let newNodePosition;\n    if (contextMenu.sourceNode) {\n      const sourcePos = contextMenu.sourceNode.position;\n      newNodePosition = {\n        x: sourcePos.x + 200,\n        // 200px à direita do nó de origem\n        y: sourcePos.y + 100 // 100px abaixo do nó de origem\n      };\n    } else {\n      // Se não houver nó de origem, usar a posição do clique\n      newNodePosition = {\n        x: position.x - 100,\n        y: position.y - 50\n      };\n    }\n    const newNode = {\n      id: newNodeId,\n      type: 'custom',\n      position: newNodePosition,\n      data: {\n        ...artifactType,\n        animalName: artifactType.type === 'animal' ? animalName : artifactType.label,\n        apelido: '',\n        peso: '',\n        idade: '',\n        responsavel: ''\n      }\n    };\n\n    // Criar uma nova conexão se houver um nó de origem\n    let newEdge = null;\n    if (contextMenu.sourceNode) {\n      const edgeId = `${contextMenu.sourceNode.id}-${newNodeId}`;\n      newEdge = {\n        id: edgeId,\n        source: contextMenu.sourceNode.id,\n        target: newNodeId,\n        type: 'smoothstep',\n        animated: false,\n        style: {\n          stroke: contextMenu.sourceNode.data.color || '#666',\n          strokeWidth: 3,\n          strokeDasharray: '5,5' // Linha tracejada para destacar\n        },\n        label: 'Novo',\n        // Label para identificar a conexão\n        labelStyle: {\n          fill: contextMenu.sourceNode.data.color || '#666',\n          fontWeight: 'bold',\n          fontSize: '12px'\n        }\n      };\n    }\n\n    // Adicionar o novo nó e edge\n    setNodes(prevNodes => [...prevNodes, newNode]);\n    if (newEdge) {\n      setEdges(prevEdges => [...prevEdges, newEdge]);\n    }\n\n    // Atualizar o estado global\n    if (onUpdate) {\n      const updatedNodes = [...nodes, newNode];\n      const updatedEdges = newEdge ? [...edges, newEdge] : edges;\n      onUpdate(updatedNodes, updatedEdges);\n    }\n\n    // Se for um cachorro, salvar dados iniciais no localStorage e abrir painel\n    if (artifactType.type === 'animal') {\n      const initialData = {\n        nome: animalName,\n        apelido: '',\n        peso: '',\n        idade: '',\n        responsavel: ''\n      };\n      saveAnimalData(newNodeId, initialData);\n      setSelectedAnimal(newNode);\n      setIsDetailsPanelOpen(true);\n    }\n  }, [nodes, edges, onUpdate, contextMenu.sourceNode]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flow-canvas\",\n    ref: reactFlowWrapper,\n    children: [/*#__PURE__*/_jsxDEV(ReactFlow, {\n      nodes: nodes.map(node => ({\n        ...node,\n        data: {\n          ...node.data,\n          highlightedNodes: highlightedNodes && typeof highlightedNodes === 'object' ? highlightedNodes : new Set()\n        }\n      })),\n      edges: edges,\n      onNodesChange: onNodesChange,\n      onEdgesChange: onEdgesChange,\n      onConnect: onConnect,\n      onNodeClick: onNodeClick,\n      onNodeContextMenu: onNodeContextMenu,\n      onPaneContextMenu: onPaneContextMenu,\n      nodeTypes: nodeTypes,\n      ...FLOW_CONFIG,\n      attributionPosition: \"bottom-left\",\n      children: [/*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Background, {\n        color: \"#aaa\",\n        gap: 16\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MiniMap, {\n        nodeColor: node => {\n          switch (node.data.type) {\n            case 'matilha':\n              return '#ff6b6b';\n            case 'animal':\n              return '#4ecdc4';\n            default:\n              return '#95a5a6';\n          }\n        },\n        nodeStrokeWidth: 3\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AnimalDetailsPanel, {\n      animal: selectedAnimal,\n      isOpen: isDetailsPanelOpen,\n      onClose: handleCloseDetailsPanel,\n      onSave: handleSaveAnimal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ContextMenu, {\n      position: contextMenu.position,\n      onClose: handleCloseContextMenu,\n      onCreateArtifact: handleCreateArtifact,\n      sourceNode: contextMenu.sourceNode\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 424,\n    columnNumber: 5\n  }, this);\n}\n\n// Componente principal que envolve com ReactFlowProvider\n_s(FlowCanvasInner, \"xMY5gtQ679QtJt4WoDZqxjxIEco=\", false, function () {\n  return [useReactFlow];\n});\n_c = FlowCanvasInner;\nfunction FlowCanvas(props) {\n  return /*#__PURE__*/_jsxDEV(ReactFlowProvider, {\n    children: /*#__PURE__*/_jsxDEV(FlowCanvasInner, {\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 482,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 481,\n    columnNumber: 5\n  }, this);\n}\n_c2 = FlowCanvas;\nexport default FlowCanvas;\nvar _c, _c2;\n$RefreshReg$(_c, \"FlowCanvasInner\");\n$RefreshReg$(_c2, \"FlowCanvas\");","map":{"version":3,"names":["addEdge","Background","Controls","MiniMap","ReactFlow","ReactFlowProvider","useReactFlow","React","useCallback","useEffect","useRef","useState","FLOW_CONFIG","saveAnimalData","AnimalDetailsPanel","ContextMenu","CustomNode","jsxDEV","_jsxDEV","nodeTypes","custom","FlowCanvasInner","nodes","initialNodes","edges","initialEdges","onUpdate","onMatilhaClick","onAnimalUpdate","canvasId","highlightedNodes","_s","console","log","setNodes","setEdges","selectedAnimal","setSelectedAnimal","isDetailsPanelOpen","setIsDetailsPanelOpen","contextMenu","setContextMenu","show","position","sourceNode","reactFlowWrapper","reactFlowInstance","onNodesChange","changes","nds","updatedNodes","forEach","change","type","map","node","id","filter","item","onEdgesChange","eds","updatedEdges","edge","onConnect","params","onNodeClick","event","data","onNodeContextMenu","preventDefault","x","clientX","y","clientY","onPaneContextMenu","handleSaveAnimal","animalId","animalData","prevNodes","animalName","nome","handleCloseDetailsPanel","handleCloseContextMenu","handleDeleteNode","nodeId","prevEdges","source","target","handleSaveSVG","allNodes","getNodes","length","alert","bounds","reduce","nodeWidth","nodeHeight","minX","Math","min","maxX","max","minY","maxY","padding","width","height","newSvg","document","createElementNS","setAttribute","background","appendChild","nodeElement","color","textElement","textContent","label","allEdges","getEdges","find","n","targetNode","line","sourceX","sourceY","targetX","targetY","defs","marker","polygon","svgData","XMLSerializer","serializeToString","svgBlob","Blob","url","URL","createObjectURL","link","createElement","href","download","Date","toISOString","split","body","click","removeChild","revokeObjectURL","error","window","saveCanvasAsSVG","handleCreateArtifact","artifactType","newNodeId","now","randomIndex","floor","random","names","newNodePosition","sourcePos","newNode","apelido","peso","idade","responsavel","newEdge","edgeId","animated","style","stroke","strokeWidth","strokeDasharray","labelStyle","fill","fontWeight","fontSize","initialData","className","ref","children","Set","attributionPosition","fileName","_jsxFileName","lineNumber","columnNumber","gap","nodeColor","nodeStrokeWidth","animal","isOpen","onClose","onSave","onCreateArtifact","_c","FlowCanvas","props","_c2","$RefreshReg$"],"sources":["/Users/indiamaris/CODE/petflow/src/components/FlowCanvas.js"],"sourcesContent":["import {\n    addEdge,\n    Background,\n    Controls,\n    MiniMap,\n    ReactFlow,\n    ReactFlowProvider,\n    useReactFlow\n} from '@xyflow/react';\nimport '@xyflow/react/dist/style.css';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { FLOW_CONFIG } from '../config/flow-config';\nimport { saveAnimalData } from '../utils/storage-utils';\nimport AnimalDetailsPanel from './AnimalDetailsPanel';\nimport ContextMenu from './ContextMenu';\nimport CustomNode from './CustomNode';\nimport './FlowCanvas.css';\n\nconst nodeTypes = {\n  custom: CustomNode\n};\n\n// Componente interno que usa useReactFlow\nfunction FlowCanvasInner({ nodes: initialNodes, edges: initialEdges, onUpdate, onMatilhaClick, onAnimalUpdate, canvasId, highlightedNodes }) {\n  // Debug: verificar se highlightedNodes está sendo passado\n  console.log('FlowCanvasInner - highlightedNodes:', highlightedNodes);\n  console.log('FlowCanvasInner - typeof highlightedNodes:', typeof highlightedNodes);\n  const [nodes, setNodes] = useState(initialNodes);\n  const [edges, setEdges] = useState(initialEdges);\n  const [selectedAnimal, setSelectedAnimal] = useState(null);\n  const [isDetailsPanelOpen, setIsDetailsPanelOpen] = useState(false);\n  const [contextMenu, setContextMenu] = useState({ show: false, position: null, sourceNode: null });\n  const reactFlowWrapper = useRef(null);\n  const reactFlowInstance = useReactFlow();\n\n  const onNodesChange = useCallback((changes) => {\n    setNodes((nds) => {\n      let updatedNodes = [...nds];\n      \n      changes.forEach(change => {\n        if (change.type === 'position') {\n          updatedNodes = updatedNodes.map(node => \n            node.id === change.id \n              ? { ...node, position: change.position }\n              : node\n          );\n        } else if (change.type === 'remove') {\n          updatedNodes = updatedNodes.filter(node => node.id !== change.id);\n        } else if (change.type === 'add') {\n          updatedNodes = [...updatedNodes, change.item];\n        }\n      });\n      \n      return updatedNodes;\n    });\n  }, []);\n\n  const onEdgesChange = useCallback((changes) => {\n    setEdges((eds) => {\n      let updatedEdges = [...eds];\n      \n      changes.forEach(change => {\n        if (change.type === 'remove') {\n          updatedEdges = updatedEdges.filter(edge => edge.id !== change.id);\n        } else if (change.type === 'add') {\n          updatedEdges = [...updatedEdges, change.item];\n        }\n      });\n      \n      return updatedEdges;\n    });\n  }, []);\n\n  const onConnect = useCallback(\n    (params) => {\n      setEdges((eds) => addEdge(params, eds));\n    },\n    []\n  );\n\n  const onNodeClick = useCallback((event, node) => {\n    console.log('Node clicked:', node);\n    if (node.data.type === 'matilha') {\n      onMatilhaClick(node.id);\n    } else if (node.data.type === 'animal') {\n      setSelectedAnimal(node);\n      setIsDetailsPanelOpen(true);\n    }\n  }, [onMatilhaClick]);\n\n  const onNodeContextMenu = useCallback((event, node) => {\n    event.preventDefault();\n    setContextMenu({\n      show: true,\n      position: { x: event.clientX, y: event.clientY },\n      sourceNode: node\n    });\n  }, []);\n\n  const onPaneContextMenu = useCallback((event) => {\n    event.preventDefault();\n    setContextMenu({\n      show: true,\n      position: { x: event.clientX, y: event.clientY },\n      sourceNode: null\n    });\n  }, []);\n\n  // Removido useEffect que causava loop infinito\n  // onUpdate é chamado manualmente quando necessário\n\n  // Sincronizar com as mudanças externas apenas na primeira renderização\n  useEffect(() => {\n    setNodes(initialNodes);\n    setEdges(initialEdges);\n  }, []); // Array vazio para executar apenas uma vez\n\n  const handleSaveAnimal = useCallback((animalId, animalData) => {\n    // Atualizar o estado local dos nós imediatamente\n    setNodes(prevNodes => \n      prevNodes.map(node => \n        node.id === animalId \n          ? { \n              ...node, \n              data: { \n                ...node.data, \n                ...animalData,\n                // Atualizar o animalName para refletir no canvas\n                animalName: animalData.nome || node.data.animalName\n              } \n            }\n          : node\n      )\n    );\n    \n    // Atualizar o estado global\n    if (onAnimalUpdate) {\n      onAnimalUpdate(animalId, animalData);\n    }\n    \n    // Fechar o painel\n    setIsDetailsPanelOpen(false);\n    setSelectedAnimal(null);\n  }, [onAnimalUpdate]);\n\n  const handleCloseDetailsPanel = useCallback(() => {\n    setIsDetailsPanelOpen(false);\n    setSelectedAnimal(null);\n  }, []);\n\n  const handleCloseContextMenu = useCallback(() => {\n    setContextMenu({ show: false, position: null, sourceNode: null });\n  }, []);\n\n  const handleDeleteNode = useCallback((nodeId) => {\n    // Remover o nó do estado local\n    setNodes(prevNodes => prevNodes.filter(node => node.id !== nodeId));\n    \n    // Remover todas as edges conectadas a este nó\n    setEdges(prevEdges => prevEdges.filter(edge => \n      edge.source !== nodeId && edge.target !== nodeId\n    ));\n    \n    // Atualizar o estado global\n    if (onUpdate) {\n      const updatedNodes = nodes.filter(node => node.id !== nodeId);\n      const updatedEdges = edges.filter(edge => \n        edge.source !== nodeId && edge.target !== nodeId\n      );\n      onUpdate(updatedNodes, updatedEdges);\n    }\n    \n    // Fechar painel de detalhes se o nó deletado era o selecionado\n    if (selectedAnimal && selectedAnimal.id === nodeId) {\n      setIsDetailsPanelOpen(false);\n      setSelectedAnimal(null);\n    }\n  }, [nodes, edges, onUpdate, selectedAnimal]);\n\n  const handleSaveSVG = useCallback(() => {\n    if (reactFlowInstance) {\n      try {\n        // Obter todos os nós para calcular bounds\n        const allNodes = reactFlowInstance.getNodes();\n        \n        if (allNodes.length === 0) {\n          alert('Não há nós para exportar.');\n          return;\n        }\n        \n        // Calcular bounds dos nós\n        const bounds = allNodes.reduce((bounds, node) => {\n          const nodeWidth = node.data.type === 'granja' ? 120 : 100;\n          const nodeHeight = node.data.type === 'granja' ? 80 : 60;\n          \n          bounds.minX = Math.min(bounds.minX, node.position.x);\n          bounds.maxX = Math.max(bounds.maxX, node.position.x + nodeWidth);\n          bounds.minY = Math.min(bounds.minY, node.position.y);\n          bounds.maxY = Math.max(bounds.maxY, node.position.y + nodeHeight);\n          return bounds;\n        }, { \n          minX: allNodes[0].position.x, \n          maxX: allNodes[0].position.x, \n          minY: allNodes[0].position.y, \n          maxY: allNodes[0].position.y \n        });\n        \n        // Adicionar padding\n        const padding = 100;\n        const width = bounds.maxX - bounds.minX + padding * 2;\n        const height = bounds.maxY - bounds.minY + padding * 2;\n        \n        // Criar um novo SVG\n        const newSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        newSvg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n        newSvg.setAttribute('viewBox', `${bounds.minX - padding} ${bounds.minY - padding} ${width} ${height}`);\n        newSvg.setAttribute('width', width);\n        newSvg.setAttribute('height', height);\n        newSvg.setAttribute('style', 'background-color: #f8f9fa;');\n        \n        // Adicionar background\n        const background = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n        background.setAttribute('width', '100%');\n        background.setAttribute('height', '100%');\n        background.setAttribute('fill', '#f8f9fa');\n        newSvg.appendChild(background);\n        \n        // Adicionar nós como retângulos representativos\n        allNodes.forEach(node => {\n          const nodeElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n          const nodeWidth = node.data.type === 'matilha' ? 120 : 100;\n          const nodeHeight = node.data.type === 'matilha' ? 80 : 60;\n          \n          nodeElement.setAttribute('x', node.position.x);\n          nodeElement.setAttribute('y', node.position.y);\n          nodeElement.setAttribute('width', nodeWidth);\n          nodeElement.setAttribute('height', nodeHeight);\n          nodeElement.setAttribute('fill', node.data.color || '#666');\n          nodeElement.setAttribute('stroke', '#333');\n          nodeElement.setAttribute('stroke-width', '2');\n          nodeElement.setAttribute('rx', '8');\n          \n          // Adicionar texto do nó\n          const textElement = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n          textElement.setAttribute('x', node.position.x + nodeWidth / 2);\n          textElement.setAttribute('y', node.position.y + nodeHeight / 2 + 5);\n          textElement.setAttribute('text-anchor', 'middle');\n          textElement.setAttribute('fill', 'white');\n          textElement.setAttribute('font-size', '12');\n          textElement.setAttribute('font-weight', 'bold');\n          textElement.textContent = node.data.animalName || node.data.label;\n          \n          newSvg.appendChild(nodeElement);\n          newSvg.appendChild(textElement);\n        });\n        \n        // Adicionar conexões\n        const allEdges = reactFlowInstance.getEdges();\n        allEdges.forEach(edge => {\n          const sourceNode = allNodes.find(n => n.id === edge.source);\n          const targetNode = allNodes.find(n => n.id === edge.target);\n          \n          if (sourceNode && targetNode) {\n            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n            const sourceX = sourceNode.position.x + (sourceNode.data.type === 'matilha' ? 60 : 50);\n            const sourceY = sourceNode.position.y + (sourceNode.data.type === 'matilha' ? 60 : 30);\n            const targetX = targetNode.position.x + (targetNode.data.type === 'matilha' ? 60 : 50);\n            const targetY = targetNode.position.y + (targetNode.data.type === 'matilha' ? 60 : 30);\n            \n            line.setAttribute('x1', sourceX);\n            line.setAttribute('y1', sourceY);\n            line.setAttribute('x2', targetX);\n            line.setAttribute('y2', targetY);\n            line.setAttribute('stroke', '#666');\n            line.setAttribute('stroke-width', '2');\n            line.setAttribute('marker-end', 'url(#arrowhead)');\n            \n            newSvg.appendChild(line);\n          }\n        });\n        \n        // Adicionar definição de seta\n        const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\n        const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');\n        marker.setAttribute('id', 'arrowhead');\n        marker.setAttribute('markerWidth', '10');\n        marker.setAttribute('markerHeight', '7');\n        marker.setAttribute('refX', '9');\n        marker.setAttribute('refY', '3.5');\n        marker.setAttribute('orient', 'auto');\n        \n        const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n        polygon.setAttribute('points', '0 0, 10 3.5, 0 7');\n        polygon.setAttribute('fill', '#666');\n        \n        marker.appendChild(polygon);\n        defs.appendChild(marker);\n        newSvg.appendChild(defs);\n        \n        // Converter para string SVG\n        const svgData = new XMLSerializer().serializeToString(newSvg);\n        const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });\n        \n        // Criar link de download\n        const url = URL.createObjectURL(svgBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `petflow_canvas_${canvasId}_${new Date().toISOString().split('T')[0]}.svg`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n        \n        alert('Canvas salvo como SVG com sucesso!');\n      } catch (error) {\n        console.error('Erro ao salvar SVG:', error);\n        alert('Erro ao salvar SVG. Tente novamente.');\n      }\n    }\n  }, [reactFlowInstance, canvasId]);\n\n  // Expor função de salvar SVG globalmente\n  useEffect(() => {\n    window.saveCanvasAsSVG = handleSaveSVG;\n    \n    return () => {\n      delete window.saveCanvasAsSVG;\n    };\n  }, [handleSaveSVG]);\n\n  const handleCreateArtifact = useCallback((artifactType, position) => {\n    const newNodeId = `${artifactType.id}-${Date.now()}`;\n    \n    // Gerar nome único para cachorros\n    let animalName = artifactType.label;\n    if (artifactType.type === 'animal') {\n      const randomIndex = Math.floor(Math.random() * 24);\n      const names = ['Buddy', 'Max', 'Luna', 'Rocky', 'Bella', 'Charlie', 'Lucy', 'Cooper', 'Daisy', 'Bear', 'Molly', 'Duke', 'Sophie', 'Jack', 'Ruby', 'Oliver', 'Chloe', 'Tucker', 'Penny', 'Winston', 'Lola', 'Murphy', 'Zoe', 'Finn'];\n      animalName = names[randomIndex];\n    }\n    \n    // Calcular posição do novo nó baseada no nó de origem\n    let newNodePosition;\n    if (contextMenu.sourceNode) {\n      const sourcePos = contextMenu.sourceNode.position;\n      newNodePosition = {\n        x: sourcePos.x + 200, // 200px à direita do nó de origem\n        y: sourcePos.y + 100  // 100px abaixo do nó de origem\n      };\n    } else {\n      // Se não houver nó de origem, usar a posição do clique\n      newNodePosition = { x: position.x - 100, y: position.y - 50 };\n    }\n    \n    const newNode = {\n      id: newNodeId,\n      type: 'custom',\n      position: newNodePosition,\n      data: {\n        ...artifactType,\n        animalName: artifactType.type === 'animal' ? animalName : artifactType.label,\n        apelido: '',\n        peso: '',\n        idade: '',\n        responsavel: ''\n      }\n    };\n\n    // Criar uma nova conexão se houver um nó de origem\n    let newEdge = null;\n    if (contextMenu.sourceNode) {\n      const edgeId = `${contextMenu.sourceNode.id}-${newNodeId}`;\n      newEdge = {\n        id: edgeId,\n        source: contextMenu.sourceNode.id,\n        target: newNodeId,\n        type: 'smoothstep',\n        animated: false,\n        style: { \n          stroke: contextMenu.sourceNode.data.color || '#666', \n          strokeWidth: 3,\n          strokeDasharray: '5,5' // Linha tracejada para destacar\n        },\n        label: 'Novo', // Label para identificar a conexão\n        labelStyle: {\n          fill: contextMenu.sourceNode.data.color || '#666',\n          fontWeight: 'bold',\n          fontSize: '12px'\n        }\n      };\n    }\n\n    // Adicionar o novo nó e edge\n    setNodes(prevNodes => [...prevNodes, newNode]);\n    \n    if (newEdge) {\n      setEdges(prevEdges => [...prevEdges, newEdge]);\n    }\n    \n    // Atualizar o estado global\n    if (onUpdate) {\n      const updatedNodes = [...nodes, newNode];\n      const updatedEdges = newEdge ? [...edges, newEdge] : edges;\n      onUpdate(updatedNodes, updatedEdges);\n    }\n    \n    // Se for um cachorro, salvar dados iniciais no localStorage e abrir painel\n    if (artifactType.type === 'animal') {\n      const initialData = {\n        nome: animalName,\n        apelido: '',\n        peso: '',\n        idade: '',\n        responsavel: ''\n      };\n      \n      saveAnimalData(newNodeId, initialData);\n      setSelectedAnimal(newNode);\n      setIsDetailsPanelOpen(true);\n    }\n  }, [nodes, edges, onUpdate, contextMenu.sourceNode]);\n\n  return (\n    <div className=\"flow-canvas\" ref={reactFlowWrapper}>\n      <ReactFlow\n        nodes={nodes.map(node => ({\n          ...node,\n          data: {\n            ...node.data,\n            highlightedNodes: highlightedNodes && typeof highlightedNodes === 'object' ? highlightedNodes : new Set()\n          }\n        }))}\n        edges={edges}\n        onNodesChange={onNodesChange}\n        onEdgesChange={onEdgesChange}\n        onConnect={onConnect}\n        onNodeClick={onNodeClick}\n        onNodeContextMenu={onNodeContextMenu}\n        onPaneContextMenu={onPaneContextMenu}\n        nodeTypes={nodeTypes}\n        {...FLOW_CONFIG}\n        attributionPosition=\"bottom-left\"\n      >\n        <Controls />\n        <Background color=\"#aaa\" gap={16} />\n        <MiniMap\n          nodeColor={(node) => {\n            switch (node.data.type) {\n              case 'matilha':\n                return '#ff6b6b';\n              case 'animal':\n                return '#4ecdc4';\n              default:\n                return '#95a5a6';\n            }\n          }}\n          nodeStrokeWidth={3}\n        />\n      </ReactFlow>\n      \n      <AnimalDetailsPanel\n        animal={selectedAnimal}\n        isOpen={isDetailsPanelOpen}\n        onClose={handleCloseDetailsPanel}\n        onSave={handleSaveAnimal}\n      />\n      \n      <ContextMenu\n        position={contextMenu.position}\n        onClose={handleCloseContextMenu}\n        onCreateArtifact={handleCreateArtifact}\n        sourceNode={contextMenu.sourceNode}\n      />\n    </div>\n  );\n}\n\n// Componente principal que envolve com ReactFlowProvider\nfunction FlowCanvas(props) {\n  return (\n    <ReactFlowProvider>\n      <FlowCanvasInner {...props} />\n    </ReactFlowProvider>\n  );\n}\n\nexport default FlowCanvas;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}